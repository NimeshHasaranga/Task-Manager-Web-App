{"ast":null,"code":"var _jsxFileName = \"F:\\\\new folder\\\\Task-Manager-Web-App\\\\frontend\\\\src\\\\pages\\\\EditTask.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport TaskForm from '../components/TaskForm';\nimport Spinner from '../components/Spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditTask() {\n  _s();\n  const [task, setTask] = useState(null);\n  const [errorMessage, setErrorMessage] = useState('');\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n\n  // Validate MongoDB ObjectId format (24-character hex string)\n  const isValidObjectId = id => /^[0-9a-fA-F]{24}$/.test(id);\n  useEffect(() => {\n    const fetchTask = async () => {\n      // Validate task ID\n      if (!isValidObjectId(id)) {\n        setErrorMessage('Invalid task ID');\n        setTimeout(() => navigate('/'), 3000);\n        return;\n      }\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/tasks/${id}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        const fetchedTask = response.data;\n\n        // Validate task data\n        if (!fetchedTask || !fetchedTask.title || !fetchedTask.dueDate || !['Low', 'Medium', 'High'].includes(fetchedTask.priority)) {\n          setErrorMessage('Invalid task data received');\n          setTimeout(() => navigate('/'), 3000);\n          return;\n        }\n        setTask(fetchedTask);\n      } catch (error) {\n        let message = 'Error fetching task';\n        if (error.response) {\n          if (error.response.status === 404) {\n            message = 'Task not found';\n          } else if (error.response.status === 401) {\n            message = 'Unauthorized access. Please log in again.';\n            localStorage.removeItem('token'); // Clear invalid token\n          } else if (error.response.status === 500) {\n            message = 'Server error. Please try again later.';\n          }\n        }\n        console.error('Error fetching task:', error);\n        setErrorMessage(message);\n        setTimeout(() => navigate('/'), 3000);\n      }\n    };\n    fetchTask();\n  }, [id, navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-900 text-white p-6 pt-20\",\n    style: {\n      backgroundImage: `\n          radial-gradient(circle at 1px 1px, rgba(255, 255, 255, 0.2) 1px, transparent 1px)\n        `,\n      backgroundSize: '30px 30px'\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-extrabold mb-6 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent\",\n        children: \"Edit Task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-400 text-sm mb-4 text-center animate-fade-in\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), task ? /*#__PURE__*/_jsxDEV(TaskForm, {\n        task: task,\n        isEdit: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center\",\n        children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(EditTask, \"UL1pXA1RHIyENR+lMrS7WGqtErA=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditTask;\nexport default EditTask;\nvar _c;\n$RefreshReg$(_c, \"EditTask\");","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","axios","TaskForm","Spinner","jsxDEV","_jsxDEV","EditTask","_s","task","setTask","errorMessage","setErrorMessage","id","navigate","isValidObjectId","test","fetchTask","setTimeout","response","get","process","env","REACT_APP_API_URL","headers","Authorization","localStorage","getItem","fetchedTask","data","title","dueDate","includes","priority","error","message","status","removeItem","console","className","style","backgroundImage","backgroundSize","children","fileName","_jsxFileName","lineNumber","columnNumber","isEdit","_c","$RefreshReg$"],"sources":["F:/new folder/Task-Manager-Web-App/frontend/src/pages/EditTask.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport TaskForm from '../components/TaskForm';\r\nimport Spinner from '../components/Spinner';\r\n\r\nfunction EditTask() {\r\n  const [task, setTask] = useState(null);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  // Validate MongoDB ObjectId format (24-character hex string)\r\n  const isValidObjectId = (id) => /^[0-9a-fA-F]{24}$/.test(id);\r\n\r\n  useEffect(() => {\r\n    const fetchTask = async () => {\r\n      // Validate task ID\r\n      if (!isValidObjectId(id)) {\r\n        setErrorMessage('Invalid task ID');\r\n        setTimeout(() => navigate('/'), 3000);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/api/tasks/${id}`, {\r\n          headers: { Authorization: `Bearer ${localStorage.getItem('token')}` },\r\n        });\r\n\r\n        const fetchedTask = response.data;\r\n\r\n        // Validate task data\r\n        if (!fetchedTask || !fetchedTask.title || !fetchedTask.dueDate || !['Low', 'Medium', 'High'].includes(fetchedTask.priority)) {\r\n          setErrorMessage('Invalid task data received');\r\n          setTimeout(() => navigate('/'), 3000);\r\n          return;\r\n        }\r\n\r\n        setTask(fetchedTask);\r\n      } catch (error) {\r\n        let message = 'Error fetching task';\r\n        if (error.response) {\r\n          if (error.response.status === 404) {\r\n            message = 'Task not found';\r\n          } else if (error.response.status === 401) {\r\n            message = 'Unauthorized access. Please log in again.';\r\n            localStorage.removeItem('token'); // Clear invalid token\r\n          } else if (error.response.status === 500) {\r\n            message = 'Server error. Please try again later.';\r\n          }\r\n        }\r\n        console.error('Error fetching task:', error);\r\n        setErrorMessage(message);\r\n        setTimeout(() => navigate('/'), 3000);\r\n      }\r\n    };\r\n\r\n    fetchTask();\r\n  }, [id, navigate]);\r\n\r\n  return (\r\n    <div\r\n      className=\"min-h-screen bg-gray-900 text-white p-6 pt-20\"\r\n      style={{\r\n        backgroundImage: `\r\n          radial-gradient(circle at 1px 1px, rgba(255, 255, 255, 0.2) 1px, transparent 1px)\r\n        `,\r\n        backgroundSize: '30px 30px',\r\n      }}\r\n    >\r\n      <div className=\"container mx-auto\">\r\n        <h2 className=\"text-3xl font-extrabold mb-6 text-center bg-gradient-to-r from-blue-500 to-purple-500 bg-clip-text text-transparent\">\r\n          Edit Task\r\n        </h2>\r\n        {errorMessage && (\r\n          <p className=\"text-red-400 text-sm mb-4 text-center animate-fade-in\">{errorMessage}</p>\r\n        )}\r\n        {task ? (\r\n          <TaskForm task={task} isEdit />\r\n        ) : (\r\n          <div className=\"flex items-center justify-center\">\r\n            <Spinner />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditTask;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}